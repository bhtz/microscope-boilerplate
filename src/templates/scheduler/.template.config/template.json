{
  "$schema": "http://json.schemastore.org/template",
  "author": "Benjamin HEINTZ",
  
  "classifications": [
    "Modular",
    "Monolith",
    "MartenDB",
    "Vertical slice"
  ],
  
  "identity": "Microscope.Boilerplate.Service",
  "name": "Microscope boilerplate modular monolith",
  "shortName": "mcsp_service",
  "sourceName": "Microscope.Boilerplate",

  "symbols": {
    "GraphQL": {
      "type": "parameter",
      "description": "Add GraphQL protocol",
      "datatype": "bool",
      "defaultValue": false
    },
    
    "Rest": {
      "type": "parameter",
      "description": "Add REST protocol",
      "datatype": "bool",
      "defaultValue": false
    },

    "Grpc": {
      "type": "parameter",
      "description": "Add gRPC protocol",
      "datatype": "bool",
      "defaultValue": false
    },

    "Docker": {
      "type": "parameter",
      "description": "Add Docker support",
      "datatype": "bool",
      "defaultValue": false
    },

    "Aspire": {
      "type": "parameter",
      "description": "Add Aspire support",
      "datatype": "bool",
      "defaultValue": false
    },

    "UnitTest": {
      "type": "parameter",
      "description": "Add Unit test",
      "datatype": "bool",
      "defaultValue": false
    }
  },
  
  "sources": [
    {
      "modifiers": [
        {
          "exclude": [
            "**/[Bb]in/**",
            "**/[Oo]bj/**",
            ".template.config/**/*",
            "**/*.filelist",
            "**/*.user",
            "**/*.lock.json",
            ".idea/**/*"
          ]
        },
        
        {
          "condition": "(!GraphQL)",
          "exclude": [
            "**/*Resolver.cs",
            "**/*GraphQL*/**",
            "**/GraphQL/**",
            "**/GraphQLConfiguration.cs"
          ]
        },
        {
          "condition": "(!Rest)",
          "exclude": [
            "**/*Controller.cs",
            "**/*Endpoints.cs",
            "**/OpenApiConfiguration.cs",
            "**/RestConfiguration.cs",
            "**/TodoRestConfiguration.cs"
          ]
        },

        {
          "condition": "(!Grpc)",
          "exclude": [
            "**/Protos/**",
            "**/*RpcService.cs",
            "**/*GrpcService.cs",
            "Microscope.Boilerplate.API/Configurations/GrpcConfiguration.cs"
          ]
        },
        
        {
          "condition": "(!Docker)",
          "exclude": [
            "src/IAC/Docker/docker-compose.yml",
          ]
        },
        {
          "condition": "(!Aspire)",
          "exclude": [
            "IAC/Aspire/**",
            "Microscope.Boilerplate.ServiceDefaults/**"
          ]
        },

        {
          "condition": "(!Docker && !Aspire)",
          "exclude": [
            "src/IAC/Docker/**"
          ]
        },

        {
          "condition": "(!UnitTest)",
          "exclude": [
            "Modules/Todo/Microscope.Boilerplate.Todo.Domain.Tests.Unit/**"
          ]
        }
      ]
    }
  ]
}
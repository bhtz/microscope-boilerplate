{
  "$schema": "http://json.schemastore.org/template",
  "author": "Benjamin HEINTZ",
  
  "classifications": [
    "Modular",
    "Monolith",
    "MartenDB",
    "Vertical slice"
  ],
  
  "identity": "Microscope.Boilerplate.Service",
  "name": "Microscope boilerplate modular monolith",
  "shortName": "mcsp_service",
  "sourceName": "Microscope.Boilerplate",

  "symbols": {
    "GraphQL": {
      "type": "parameter",
      "description": "Add GraphQL protocol",
      "datatype": "bool",
      "defaultValue": "false"
    },
    
    "Rest": {
      "type": "parameter",
      "description": "Add REST protocol",
      "datatype": "bool",
      "defaultValue": "false"
    },

    "Grpc": {
      "type": "parameter",
      "description": "Add gRPC protocol",
      "datatype": "bool",
      "defaultValue": "false"
    },

    "Docker": {
      "type": "parameter",
      "description": "Add Docker support",
      "datatype": "bool",
      "defaultValue": "false"
    },

    "Aspire": {
      "type": "parameter",
      "description": "Add Aspire support",
      "datatype": "bool",
      "defaultValue": "false"
    },

    "Module": {
      "type": "parameter",
      "description": "Add only module without framework or API",
      "datatype": "bool",
      "defaultValue": "false"
    },

    "ModuleName": {
      "type": "parameter",
      "description": "Name of the module (used to replace Todo)",
      "datatype": "string",
    }
  },
  
  "sources": [
    {
      "modifiers": [
        {
          "exclude": [
            "**/[Bb]in/**",
            "**/[Oo]bj/**",
            ".template.config/**/*",
            "**/*.filelist",
            "**/*.user",
            "**/*.lock.json",
            ".idea/**/*"
          ]
        },

        {
          "condition": "(Module)",
          "exclude": [
            "**/Framework/**",
            "**/IAC/**",
            "**/GraphQL/**",
            "Microscope.Boilerplate.ServiceDefaults/**",
            "Microscope.Boilerplate.API/**",
            "Microscope.Boilerplate.sln",
            "readme.md"
          ],
          "rename": {
            "Todo": "__ModuleName__"
          }
        },
        
        {
          "condition": "(!GraphQL)",
          "exclude": [
            "**/*Resolver.cs",
            "**/*GraphQL*/**",
            "**/GraphQL/**",
            "**/GraphQLConfiguration.cs"
          ]
        },
        {
          "condition": "(!Rest)",
          "exclude": [
            "**/*Controller.cs",
            "**/*Endpoints.cs",
            "**/OpenApiConfiguration.cs",
            "**/RestConfiguration.cs",
            "**/TodoRestConfiguration.cs"
          ]
        },

        {
          "condition": "(!Grpc)",
          "exclude": [
            "**/Protos/**",
            "**/*RpcService.cs",
            "**/*GrpcService.cs",
            "Microscope.Boilerplate.API/Configurations/GrpcConfiguration.cs"
          ]
        },
        
        {
          "condition": "(!Docker && !Module)",
          "exclude": ["IAC/Docker/**"]
        },
        {
          "condition": "(!Aspire && !Module)",
          "exclude": [
            "IAC/Aspire/**",
            "Microscope.Boilerplate.ServiceDefaults/**"
          ]
        }
      ]
    }
  ]
}